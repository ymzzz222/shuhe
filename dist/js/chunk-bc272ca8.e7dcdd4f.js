(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bc272ca8"],{"21df":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home_details"},[s("div",{staticClass:"title"},[s("router-link",{attrs:{to:"/",tag:"span"}},[t._v("社区")]),t._v("> 社区详情 ")],1),s("div",{staticClass:"flex conty"},[s("div",{staticClass:"left"},[s("div",{staticClass:"a"},[t._v(t._s(t.details.title))]),s("div",{staticClass:"b",domProps:{innerHTML:t._s(t.details.content)}}),s("div",{staticClass:"c"}),s("div",{staticClass:"d flex flex_b"},[s("div",{staticClass:"e flex"},[s("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:t.likeArticle}},[t._v(t._s(t.details.prise?"取消点赞":"点赞"))]),s("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:t.collectArticle}},[t._v(t._s(t.details.collect?"取消收藏":"收藏"))])],1),s("div",{staticClass:"f flex flex_c"},[s("i",{staticClass:"iconfont icondianzan"}),s("span",[t._v(t._s(t.details.priseCount))]),s("i",{staticClass:"iconfont iconxin"}),s("span",[t._v(t._s(t.details.collectCount))]),s("i",{staticClass:"iconfont iconkan"}),s("span",[t._v(t._s(t.details.viewCount))]),s("i",{staticClass:"iconfont iconpinglun"}),s("span",[t._v(t._s(t.details.commentCount))])])]),s("div",{staticClass:"g"},[t._v(t._s(t.details.afterCreate))]),s("div",{staticClass:"h flex"},[s("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入内容"},model:{value:t.textarea_article,callback:function(e){t.textarea_article=e},expression:"textarea_article"}}),s("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.subComment}},[t._v("提交评论")])],1),t._l(t.commentData.records,(function(e,a){return s("div",{key:a,staticClass:"item"},[s("div",{staticClass:"flex flex_b flex_c head"},[s("div",{staticClass:"flex flex_c"},[s("img",{attrs:{src:e.userInfo.head,alt:""}}),s("p",[t._v(t._s(e.userInfo.nick))])]),s("h1",[t._v(t._s(e.createDate))])]),s("div",{staticClass:"conts"},[t._v(t._s(e.comments))]),s("div",{staticClass:"none"},[t._m(0,!0),s("div",{staticClass:"flex flex_c",on:{click:function(e){return t.changeItemShow(a)}}},[s("i",{staticClass:"iconfont iconpinglun"}),s("span",[t._v("回复评论")])])]),e.show?s("div",{staticClass:"hui flex"},[s("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入内容"},model:{value:e.textarea,callback:function(s){t.$set(e,"textarea",s)},expression:"item.textarea"}}),s("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(s){return t.commentSub(e.id,a)}}},[t._v("回复")])],1):t._e(),s("div",{staticClass:"all"},t._l(e.subComment,(function(a,i){return s("div",{key:i,staticClass:"items"},[s("div",{staticClass:"top flex flex_c"},[s("img",{attrs:{src:a.userInfo.head,alt:""}}),s("p",[s("span",[t._v(t._s(a.userInfo.nick))]),t._v(" 回复 "),s("span",[t._v(t._s(e.userInfo.nick))])]),s("h6",[t._v(t._s(a.afterCreate))])]),s("div",{staticClass:"cont"},[t._v(t._s(a.comments))])])})),0)])})),t.commentData.total>10?s("el-pagination",{staticClass:"totals",attrs:{background:"",layout:"prev, pager, next","page-size":10,total:t.commentData.total},on:{"current-change":t.changePage}}):t._e()],2),t.details.userInfo?s("div",{staticClass:"right"},[s("div",{staticClass:"a flex flex_b flex_c"},[t.details.userInfo.head?s("img",{attrs:{src:t.getImg(t.details.userInfo.head),alt:""}}):t._e(),t.details.owner?t._e():s("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:t.followUser}},[t._v(t._s(t.details.userInfo.follow?"取消关注":"关注"))])],1),s("div",{staticClass:"item flex flex_b"},[s("p",[t._v("年龄:")]),s("span",[t._v(t._s(t.details.userInfo.age))])]),s("div",{staticClass:"item flex flex_b"},[s("p",[t._v("工作:")]),s("span",[t._v(t._s(t.details.userInfo.work))])]),s("div",{staticClass:"item flex flex_b"},[s("p",[t._v("地址:")]),s("span",[t._v(t._s(t.details.userInfo.address))])]),s("div",{staticClass:"item flex flex_b"},[s("p",[t._v("爱好:")]),s("span",[t._v(t._s(t.details.userInfo.hobby))])]),s("div",{staticClass:"item flex flex_b"},[s("p",[t._v("加入时间:")]),s("span",[t._v(t._s(t.details.userInfo.createDate))])])]):t._e()])])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex flex_c"},[s("i",{staticClass:"iconfont icondianzan"}),s("span",[t._v("0")])])}],n={data:function(){return{textarea_article:"",id:"",details:{},commentContent:"",parentCommentId:"",page:1,commentData:{}}},created:function(){var t=this;this.id=this.$route.query.id,axios("/article/get","get",{id:this.id}).then((function(e){t.details=e})),this.getComment()},methods:{changeItemShow:function(t){this.commentData.records[t].show?this.commentData.records[t].show=!1:this.commentData.records[t].show=!0,this.commentData.records.push(""),this.commentData.records.pop()},changePage:function(t){this.page=t,this.getComment()},getComment:function(){var t=this;axios("/article/comment","get",{articleId:this.id,page:this.page,pageSize:10}).then((function(e){t.commentData=e}))},followUser:function(){var t=this;axios("/user/follow","post",{userId:this.details.userInfo.id}).then((function(e){1==e&&(t.$message({showClose:!0,message:"关注成功",type:"success"}),t.details.userInfo.follow=!0),2==e&&(t.$message({showClose:!0,message:"取消关注成功",type:"success"}),t.details.userInfo.follow=!1)}))},likeArticle:function(){var t=this;axios("/article/prise","post",{articleId:this.id}).then((function(e){1==e&&(t.details.prise=!0,t.details.priseCount=t.details.priseCount+1),2==e&&(t.details.prise=!1,t.details.priseCount=t.details.priseCount-1)}))},collectArticle:function(){var t=this;axios("/article/collect","post",{articleId:this.id}).then((function(e){1==e&&(t.details.collect=!0,t.details.collectCount=t.details.collectCount+1),2==e&&(t.details.collect=!1,t.details.collectCount=t.details.collectCount-1)}))},subComment:function(){this.commentContent=this.textarea_article,this.parentCommentId=void 0,this.comment(),this.commentContent="",this.textarea_article=""},comment:function(){var t=this;axios("/article/comment","post",{articleId:this.id,content:this.commentContent,parentCommentId:this.parentCommentId}).then((function(e){t.parentCommentId?t.commentData.records.subComment.unshift(e):t.commentData.records.unshift(e)}))},commentSub:function(t,e){this.commentContent=this.commentData.records[e].textarea,this.commentContent?(this.parentCommentId=t,console.log(t),this.comment(),this.commentData.records[e].textarea="",this.commentContent=""):this.$message.error("评论不能为空!")}}},o=n,l=(s("7b0e"),s("2877")),c=Object(l["a"])(o,a,i,!1,null,"874f17fa",null);e["default"]=c.exports},"2cd7":function(t,e,s){},"7b0e":function(t,e,s){"use strict";var a=s("2cd7"),i=s.n(a);i.a}}]);
//# sourceMappingURL=chunk-bc272ca8.e7dcdd4f.js.map