(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40a28fbb"],{"84f2":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"group_container"},[i("div",{staticClass:"fenlei flex"},[i("p",[e._v("一级：")]),i("h6",{staticClass:"flex"},e._l(e.heada,(function(t,a){return i("span",{key:a,class:e.activea==a?"active":"",on:{click:function(i){return e.getHead(t.id,2,a)}}},[e._v(e._s(t.name))])})),0)]),i("div",{staticClass:"fenlei flex flex_c"},[i("p",[e._v("二级：")]),i("h6",{staticClass:"flex"},[0==e.headb.length?i("span",[e._v("无数据")]):e._e(),e._l(e.headb,(function(t,a){return i("span",{key:t.id,class:e.activeb==a?"active":"",on:{click:function(i){return e.getHead(t.id,3,a)}}},[e._v(e._s(t.name))])}))],2)]),i("div",{staticClass:"fenlei flex flex_c"},[i("p",[e._v("三级：")]),i("h6",{staticClass:"flex"},[0==e.headc.length?i("span",[e._v("无数据")]):e._e(),e._v(" "),e._l(e.headc,(function(t,a){return i("span",{key:t.id,class:e.activec==a?"active":"",on:{click:function(i){return e.getListy(a,t.id)}}},[e._v(e._s(t.name))])}))],2)]),i("div",{staticClass:"flex newgroup flex_c"},[i("el-input",{attrs:{placeholder:"请输入内容","prefix-icon":"el-icon-search",size:"small"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}}),i("h6",{on:{click:function(t){e.dialogVisiblei=!0}}},[e._v("生成新小组")])],1),i("div",{staticClass:"cont flex"},e._l(e.List,(function(t,a){return i("router-link",{key:a,staticClass:"item",attrs:{to:"/group_details?id="+t.id}},[i("div",{staticClass:"img"},[i("img",{attrs:{src:e.getImg(t.logo),alt:""}})]),i("p",[e._v(e._s(t.introduction))]),i("h6",[e._v(e._s(t.name))])])})),1),e.total>16?i("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":16,total:e.total},on:{"current-change":e.getList}}):e._e(),e.dialogVisiblei?i("Modelxiaozu",{attrs:{dialogVisiblei:e.dialogVisiblei},on:{"update:dialogVisiblei":function(t){e.dialogVisiblei=t},"update:dialog-visiblei":function(t){e.dialogVisiblei=t}}}):e._e()],1)},s=[],o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"model_chanping"},[i("el-dialog",{attrs:{title:"生成新小组",visible:e.dialogVisiblei,width:"900px","before-close":e.closeModel},on:{"update:visible":function(t){e.dialogVisiblei=t}}},[i("el-form",{ref:"ruleForma",staticClass:"demo-ruleForm",attrs:{model:e.ruleForma,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"图片"}},[i("el-upload",{ref:"uploada",attrs:{"list-type":"picture-card",action:"",limit:1,"file-list":e.fileList,"auto-upload":!1,"on-exceed":e.handleExceed,"on-change":e.changeFile,"on-remove":e.remove}},[i("i",{staticClass:"el-icon-plus"})])],1),i("el-form-item",{attrs:{label:"名称",prop:"name",rules:{required:!0,message:"请输入名称",trigger:"blur"}}},[i("el-input",{model:{value:e.ruleForma.name,callback:function(t){e.$set(e.ruleForma,"name",t)},expression:"ruleForma.name"}})],1),i("el-form-item",{attrs:{label:"简介",prop:"desc",rules:{required:!0,message:"请输入简介",trigger:"blur"}}},[i("el-input",{attrs:{maxlength:"100",type:"input"},model:{value:e.ruleForma.desc,callback:function(t){e.$set(e.ruleForma,"desc",t)},expression:"ruleForma.desc"}})],1),i("el-form-item",{attrs:{label:"小组分类",prop:"desc"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.valuey,callback:function(t){e.valuey=t},expression:"valuey"}},e._l(e.optionsy,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),i("el-form-item",{attrs:{label:"小组类别",prop:"desc"}},[i("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.check,(function(t,a){return i("el-checkbox",{key:a,attrs:{label:t.id}},[e._v(e._s(t.name))])})),1)],1),i("el-form-item",{attrs:{label:"共享关键字",prop:"guan",rules:{required:!0,message:"请输入名称",trigger:"blur"}}},[i("el-input",{model:{value:e.ruleForma.guan,callback:function(t){e.$set(e.ruleForma,"guan",t)},expression:"ruleForma.guan"}})],1),i("el-form-item",{attrs:{label:"选择关键字",rules:{required:!0,message:"请输入名称",trigger:"blur"},prop:"guan"}},[i("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"},on:{show:e.getShow}},[i("ul",e._l(e.showList,(function(t,a){return i("li",{key:a},[i("p",[e._v(e._s(t.keyName))]),t.card.length>0?i("el-checkbox-group",{model:{value:e.checkListy,callback:function(t){e.checkListy=t},expression:"checkListy"}},e._l(t.card,(function(t,a){return i("el-checkbox",{key:a,attrs:{label:t}},[e._v(e._s(t.cardName))])})),1):e._e()],1)})),0),i("el-button",{attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.ruleForma.gong||"请选择数和共享"))])],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.closeModel}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.submitForma("ruleForma")}}},[e._v("确 定")])],1)],1)],1)},l=[],n=(i("99af"),i("c975"),i("a434"),i("b0c0"),i("d3b7"),i("25f0"),{props:["dialogVisiblei"],data:function(){return{checkList:[],check:[],options:[],value:"",optionsy:[],valuey:"",ruleForma:{name:"",desc:"",guan:"",gong:""},id:"",fileList:[],loading:!1,showList:[],checkListy:[]}},watch:{value:function(e){this.optionsy=[],this.valuey="",this.check=[],this.checkList=[],this.getOption(e,2)},valuey:function(e){""!=e&&(this.check=[],this.checkList=[],this.getOption(e,3))},checkListy:function(e){for(var t="",i=0;i<e.length;i++)t+=0==i?e[i].cardName:","+e[i].cardName;this.ruleForma.gong=t}},created:function(){this.id=this.$route.query.id,this.getOption("",1),sessionStorage.setItem("keywords","-1")},methods:{getShow:function(){var e=this;this.ruleForma.guan!=sessionStorage.getItem("keywords")&&(console.log(this.ruleForma.guan),axios("/group/keys/list","get",{keys:this.ruleForma.guan}).then((function(t){sessionStorage.setItem("keywords",e.ruleForma.guan),e.showList=t})))},getOption:function(e,t){var i=this;axios("/category/list","get",{parentId:e}).then((function(e){1==t?i.options=e:2==t?i.optionsy=e:3==t&&(i.check=e)}))},closeModel:function(){this.$emit("update:dialogVisiblei",!1)},submitForma:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.loading=!0;var i=new FormData;i.append("file",t.fileList[0].raw);var a={headers:{"Content-Type":"multipart/form-data",token:localStorage.getItem("token")}};t.$axios.post(t.globalurl+"/upload/img",i,a).then((function(e){t.allsubmit(e.data.data.url)}))}}))},allsubmit:function(e){for(var t=this,i="",a=0;a<this.checkListy.length;a++)i+=0!=a?","+this.checkListy[a].id:this.checkListy[a].id;var s={name:this.ruleForma.name,logo:e,introduction:this.ruleForma.desc,classify3Ids:this.checkList.toString(),sharedKeywords:this.ruleForma.guan,shardNames:this.ruleForma.gong,content:this.ruleForma.descs,cardIds:i};axios("/group/publish","post",s).then((function(e){t.$router.go(0)}))},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},remove:function(e,t){this.fileList=t},changeFile:function(e,t){var i="image/jpeg"===e.raw.type||"image/png"===e.raw.type,a=e.raw.size/1024/1024<2;i||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),i&&a?this.fileList.push(e):t.pop()},addDomain:function(){this.ruleForma.domains.length<6&&this.ruleForma.domains.push({value:"",key:Date.now()})},removeDomain:function(e){var t=this.ruleForma.domains.indexOf(e);-1!==t&&this.ruleForma.domains.splice(t,1)}}}),r=n,c=(i("91a7"),i("2877")),u=Object(c["a"])(r,o,l,!1,null,"f7b8e0c2",null),d=u.exports,h={components:{Modelxiaozu:d},data:function(){return{input:"",id:"",List:[],heada:[],headb:[],headc:[],activea:0,activeb:0,activec:-1,total:0,dialogVisiblei:!1}},created:function(){this.getAllHead(),this.getList(1)},methods:{getListy:function(e,t){this.activec=e,this.id=t,this.getList(1)},getList:function(e){var t=this,i={page:e,pageSize:16,classify3Id:this.id,keywords:this.input};axios("/group/list","get",i).then((function(e){t.List=e.records,t.total=e.total}))},getHead:function(e,t,i){var a=this;axios("/category/list","get",{parentId:e}).then((function(e){2==t?(a.headb=e,a.headc=[],a.activea=i,a.activeb=-1):3==t&&(a.headc=e,a.activeb=i)}))},getAllHead:function(){var e=this;axios("/category/list","get").then((function(t){e.heada=t,t.length>0&&axios("/category/list","get",{parentId:t[0].id}).then((function(t){e.headb=t,t.length>0&&axios("/category/list","get",{parentId:t[0].id}).then((function(t){e.headc=t}))}))}))}}},g=h,f=(i("c359"),Object(c["a"])(g,a,s,!1,null,"08b75a60",null));t["default"]=f.exports},"8c42":function(e,t,i){},"8ee5":function(e,t,i){},"91a7":function(e,t,i){"use strict";var a=i("8ee5"),s=i.n(a);s.a},a434:function(e,t,i){"use strict";var a=i("23e7"),s=i("23cb"),o=i("a691"),l=i("50c4"),n=i("7b0b"),r=i("65f0"),c=i("8418"),u=i("1dde"),d=i("ae40"),h=u("splice"),g=d("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,p=Math.min,m=9007199254740991,v="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!h||!g},{splice:function(e,t){var i,a,u,d,h,g,b=n(this),k=l(b.length),y=s(e,k),_=arguments.length;if(0===_?i=a=0:1===_?(i=0,a=k-y):(i=_-2,a=p(f(o(t),0),k-y)),k+i-a>m)throw TypeError(v);for(u=r(b,a),d=0;d<a;d++)h=y+d,h in b&&c(u,d,b[h]);if(u.length=a,i<a){for(d=y;d<k-a;d++)h=d+a,g=d+i,h in b?b[g]=b[h]:delete b[g];for(d=k;d>k-a+i;d--)delete b[d-1]}else if(i>a)for(d=k-a;d>y;d--)h=d+a-1,g=d+i-1,h in b?b[g]=b[h]:delete b[g];for(d=0;d<i;d++)b[d+y]=arguments[d+2];return b.length=k-a+i,u}})},c359:function(e,t,i){"use strict";var a=i("8c42"),s=i.n(a);s.a}}]);
//# sourceMappingURL=chunk-40a28fbb.a3d53b30.js.map