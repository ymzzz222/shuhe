(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c6b5366"],{"0061":function(e,t,i){"use strict";var r=i("17a4"),l=i.n(r);l.a},"0949":function(e,t,i){},"143f":function(e,t,i){},"17a4":function(e,t,i){},"19a7":function(e,t,i){},"21cd":function(e,t,i){"use strict";var r=i("d6fe"),l=i.n(r);l.a},4187:function(e,t,i){},"4ba7":function(e,t,i){"use strict";var r=i("4187"),l=i.n(r);l.a},"75a9":function(e,t,i){"use strict";var r=i("0949"),l=i.n(r);l.a},"84c8":function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"model_chanping"},[i("el-dialog",{attrs:{title:"添加书籍",visible:e.dialogVisiblef,width:"900px","before-close":e.closeModel},on:{"update:visible":function(t){e.dialogVisiblef=t}}},[i("el-form",{ref:"ruleFormf",staticClass:"demo-ruleForm",attrs:{model:e.ruleFormf,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"书籍图片"}},[i("el-upload",{ref:"uploada",attrs:{"list-type":"picture-card",action:"",limit:1,"file-list":e.fileList,"auto-upload":!1,"on-exceed":e.handleExceed,"on-change":e.changeFile,"on-remove":e.remove}},[i("i",{staticClass:"el-icon-plus"})]),i("p",{staticClass:"el-upload__tip"},[e._v("最多可上传1张，只能上传jpg/png文件，且每张不超过2MB")])],1),i("el-form-item",{attrs:{label:"书籍名称",prop:"name",rules:{required:!0,message:"请输入书籍名称",trigger:"blur"}}},[i("el-input",{model:{value:e.ruleFormf.name,callback:function(t){e.$set(e.ruleFormf,"name",t)},expression:"ruleFormf.name"}})],1),i("el-form-item",{attrs:{label:"作者",prop:"athor",rules:{required:!0,message:"请输入作者",trigger:"blur"}}},[i("el-input",{model:{value:e.ruleFormf.athor,callback:function(t){e.$set(e.ruleFormf,"athor",t)},expression:"ruleFormf.athor"}})],1),i("el-form-item",{attrs:{label:"出版社",prop:"chu",rules:{required:!0,message:"请输入出版社",trigger:"blur"}}},[i("el-input",{model:{value:e.ruleFormf.chu,callback:function(t){e.$set(e.ruleFormf,"chu",t)},expression:"ruleFormf.chu"}})],1),i("el-form-item",{attrs:{label:"副标题",prop:"fu",rules:{required:!0,message:"请输入副标题",trigger:"blur"}}},[i("el-input",{model:{value:e.ruleFormf.fu,callback:function(t){e.$set(e.ruleFormf,"fu",t)},expression:"ruleFormf.fu"}})],1),i("el-form-item",{attrs:{label:"译者",prop:"yi",rules:{required:!0,message:"请输入译者",trigger:"blur"}}},[i("el-input",{model:{value:e.ruleFormf.yi,callback:function(t){e.$set(e.ruleFormf,"yi",t)},expression:"ruleFormf.yi"}})],1),i("el-form-item",{attrs:{label:"出版年",prop:"nian",rules:{required:!0,message:"请输入出版年",trigger:"blur"}}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.ruleFormf.nian,callback:function(t){e.$set(e.ruleFormf,"nian",t)},expression:"ruleFormf.nian"}})],1),i("el-form-item",{attrs:{label:"定价",prop:"ding",rules:{required:!0,message:"请输入定价",trigger:"blur"}}},[i("el-input",{attrs:{type:"number"},model:{value:e.ruleFormf.ding,callback:function(t){e.$set(e.ruleFormf,"ding",t)},expression:"ruleFormf.ding"}})],1),i("el-form-item",{attrs:{label:"ISBN",prop:"isbn",rules:{required:!0,message:"请输入ISBN",trigger:"blur"}}},[i("el-input",{model:{value:e.ruleFormf.isbn,callback:function(t){e.$set(e.ruleFormf,"isbn",t)},expression:"ruleFormf.isbn"}})],1),i("el-form-item",{attrs:{label:"豆瓣评分",prop:"dou",rules:{required:!0,message:"请输入豆瓣评分",trigger:"blur"}}},[i("el-input",{attrs:{type:"number"},model:{value:e.ruleFormf.dou,callback:function(t){e.$set(e.ruleFormf,"dou",t)},expression:"ruleFormf.dou"}})],1),e._l(e.ruleFormf.domains,(function(t,r){return i("el-form-item",{key:r,attrs:{label:"购买地址"+(r+1),prop:"domains."+r+".inputala",rules:{required:!0,message:"请输入购买地址",trigger:"blur"}}},[i("div",{staticClass:"flex delete"},[i("el-input",{staticClass:"top",attrs:{placeholder:"请输入名称"},model:{value:t.inputala,callback:function(i){e.$set(t,"inputala",i)},expression:"domain.inputala"}}),i("span",{staticClass:"heng"},[e._v("—")]),i("el-input",{staticClass:"bot",attrs:{placeholder:"请输入购买地址"},model:{value:t.inputara,callback:function(i){e.$set(t,"inputara",i)},expression:"domain.inputara"}},[i("i",{staticClass:"el-input__icon el-icon-paperclip",attrs:{slot:"prefix"},slot:"prefix"})]),i("el-button",{attrs:{type:"danger"},on:{click:function(i){return i.preventDefault(),e.removeDomainf(t)}}},[e._v("删除")])],1)])})),i("el-button",{staticClass:"addplay",attrs:{type:"primary",plain:"",icon:"el-icon-circle-plus-outline"},on:{click:e.addDomainf}},[e._v("点击添加购买地址，最多可添加6个")])],2),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.closeModel}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.submitFormf("ruleFormf")}}},[e._v("确 定")])],1)],1)],1)},l=[],a=(i("99af"),i("c975"),i("a434"),i("b0c0"),{props:["dialogVisiblef","pid"],data:function(){return{ruleFormf:{name:"",athor:"",chu:"",fu:"",yi:"",nian:"",ding:"",isbn:"",dou:"",domains:[{inputala:"",inputara:""}]},id:"",fileList:[],loading:!1}},created:function(){this.id=this.$route.query.id},methods:{closeModel:function(){this.$emit("update:dialogVisiblef",!1)},submitFormf:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.loading=!0;var i=new FormData;i.append("file",t.fileList[0].raw);var r={headers:{"Content-Type":"multipart/form-data",token:localStorage.getItem("token")}};t.$axios.post(t.globalurl+"/upload/img",i,r).then((function(e){t.allsubmit(e.data.data.url)}))}}))},allsubmit:function(e){var t=this,i=new Date(this.ruleFormf.nian),r={type:3,classify3Id:this.pid,cardId:this.id,article:{cardId:this.id,title:this.ruleFormf.name,author:this.ruleFormf.athor,press:this.ruleFormf.chu,description:this.ruleFormf.fu,translation:this.ruleFormf.yi,publicationDate:i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate(),price:this.ruleFormf.ding,isbn:this.ruleFormf.isbn,score:this.ruleFormf.dou,imgs:e,links:JSON.stringify(this.ruleFormf.domains)}};this.$axios.post(this.globalurl+"/article/publish",r,{headers:{token:localStorage.getItem("token")}}).then((function(e){t.$router.go(0)}))},handleExceed:function(e,t){this.$message.warning("当前限制选择 4 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},remove:function(e,t){this.fileList=t},changeFile:function(e,t){var i="image/jpeg"===e.raw.type||"image/png"===e.raw.type,r=e.raw.size/1024/1024<2;i||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),i&&r?this.fileList.push(e):t.pop()},addDomainf:function(){this.ruleFormf.domains.length<6&&this.ruleFormf.domains.push({value:"",key:Date.now()})},removeDomainf:function(e){var t=this.ruleFormf.domains.indexOf(e);-1!==t&&this.ruleFormf.domains.splice(t,1)}}}),o=a,s=(i("b9b3"),i("2877")),n=Object(s["a"])(o,r,l,!1,null,"9469bf5c",null);t["a"]=n.exports},"8f63":function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"model_chanping"},[i("el-dialog",{attrs:{title:"添加产品",visible:e.dialogVisiblea,width:"900px","before-close":e.closeModel},on:{"update:visible":function(t){e.dialogVisiblea=t}}},[i("el-form",{ref:"ruleForma",staticClass:"demo-ruleForm",attrs:{model:e.ruleForma,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"产品图片"}},[i("el-upload",{ref:"uploada",attrs:{"list-type":"picture-card",action:"",limit:4,"file-list":e.fileList,"auto-upload":!1,"on-exceed":e.handleExceed,"on-change":e.changeFile,"on-remove":e.remove}},[i("i",{staticClass:"el-icon-plus"})]),i("p",{staticClass:"el-upload__tip"},[e._v("最多可上传4张，只能上传jpg/png文件，且每张不超过2MB")])],1),i("el-form-item",{attrs:{label:"产品名称",prop:"name",rules:{required:!0,message:"请输入产品名称",trigger:"blur"}}},[i("el-input",{model:{value:e.ruleForma.name,callback:function(t){e.$set(e.ruleForma,"name",t)},expression:"ruleForma.name"}})],1),i("el-form-item",{attrs:{label:"推荐理由",prop:"desc",rules:{required:!0,message:"请输入推荐理由",trigger:"blur"}}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForma.desc,callback:function(t){e.$set(e.ruleForma,"desc",t)},expression:"ruleForma.desc"}})],1),e._l(e.ruleForma.domains,(function(t,r){return i("el-form-item",{key:r,attrs:{label:"购买地址"+(r+1),prop:"domains."+r+".inputala",rules:{required:!0,message:"请输入购买地址",trigger:"blur"}}},[i("div",{staticClass:"flex delete"},[i("el-input",{staticClass:"top",attrs:{placeholder:"请输入名称"},model:{value:t.inputala,callback:function(i){e.$set(t,"inputala",i)},expression:"domain.inputala"}}),i("span",{staticClass:"heng"},[e._v("—")]),i("el-input",{staticClass:"bot",attrs:{placeholder:"请输入购买地址"},model:{value:t.inputara,callback:function(i){e.$set(t,"inputara",i)},expression:"domain.inputara"}},[i("i",{staticClass:"el-input__icon el-icon-paperclip",attrs:{slot:"prefix"},slot:"prefix"})]),i("el-button",{attrs:{type:"danger"},on:{click:function(i){return i.preventDefault(),e.removeDomain(t)}}},[e._v("删除")])],1)])})),i("el-button",{staticClass:"addplay",attrs:{type:"primary",plain:"",icon:"el-icon-circle-plus-outline"},on:{click:e.addDomain}},[e._v("点击添加购买地址，最多可添加6个")])],2),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.closeModel}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForma("ruleForma")}}},[e._v("确 定")])],1)],1)],1)},l=[],a=(i("99af"),i("c975"),i("a434"),i("b0c0"),i("d3b7"),{props:["dialogVisiblea","pid"],data:function(){return{ruleForma:{name:"",desc:"",domains:[{inputala:"",inputara:""}]},id:"",fileList:[]}},created:function(){this.id=this.$route.query.id},methods:{closeModel:function(){this.$emit("update:dialogVisiblea",!1)},submitForma:function(e){var t=this;this.$refs[e].validate((function(e){e&&function(){for(var e=[],i=0;i<t.fileList.length;i++)t.uploadImg(i).then((function(i){e.push(i),e.length==t.fileList.length&&t.allsubmit(e.toString())}))}()}))},allsubmit:function(e){var t=this,i={type:2,classify3Id:this.pid,cardId:this.id,article:{cardId:this.id,title:this.ruleForma.name,content:this.ruleForma.desc,imgs:e,links:JSON.stringify(this.ruleForma.domains)}};this.$axios.post(this.globalurl+"/article/publish",i,{headers:{token:localStorage.getItem("token")}}).then((function(e){t.$router.go(0)}))},handleExceed:function(e,t){this.$message.warning("当前限制选择 4 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},remove:function(e,t){this.fileList=t},changeFile:function(e,t){var i="image/jpeg"===e.raw.type||"image/png"===e.raw.type,r=e.raw.size/1024/1024<2;i||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),i&&r?this.fileList.push(e):t.pop()},addDomain:function(){this.ruleForma.domains.length<6&&this.ruleForma.domains.push({value:"",key:Date.now()})},removeDomain:function(e){var t=this.ruleForma.domains.indexOf(e);-1!==t&&this.ruleForma.domains.splice(t,1)},uploadImg:function(e){var t=this;return new Promise((function(i,r){var l=new FormData;l.append("file",t.fileList[e].raw);var a={headers:{"Content-Type":"multipart/form-data",token:localStorage.getItem("token")}};t.$axios.post(t.globalurl+"/upload/img",l,a).then((function(e){i(e.data.data.url)}))}))}}}),o=a,s=(i("e0f7"),i("2877")),n=Object(s["a"])(o,r,l,!1,null,"34e331be",null);t["a"]=n.exports},a407:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"model_chanping"},[i("el-dialog",{attrs:{title:"添加公告",visible:e.dialogVisiblec,"before-close":e.closeModel,width:"900px"},on:{"update:visible":function(t){e.dialogVisiblec=t}}},[i("el-form",{ref:"ruleFormc",staticClass:"demo-ruleForm",attrs:{model:e.ruleFormc,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"活动图片"}},[i("el-upload",{ref:"uploada",attrs:{"list-type":"picture-card",action:"",limit:4,"file-list":e.fileList,"auto-upload":!1,"on-exceed":e.handleExceed,"on-change":e.changeFile,"on-remove":e.remove}},[i("i",{staticClass:"el-icon-plus"})]),i("p",{staticClass:"el-upload__tip"},[e._v("最多可上传4张，只能上传jpg/png文件，且每张不超过2MB")])],1),i("el-form-item",{attrs:{label:"活动名称",prop:"name",rules:{required:!0,message:"请输入活动名称",trigger:"blur"}}},[i("el-input",{model:{value:e.ruleFormc.name,callback:function(t){e.$set(e.ruleFormc,"name",t)},expression:"ruleFormc.name"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.closeModel}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.submitFormc("ruleFormc")}}},[e._v("确 定")])],1)],1)],1)},l=[],a=(i("99af"),i("b0c0"),{props:["dialogVisiblec","pid"],data:function(){return{ruleFormc:{name:""},id:"",fileList:[],loading:!1}},created:function(){this.id=this.$route.query.id},methods:{closeModel:function(){this.$emit("update:dialogVisiblec",!1)},submitFormc:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.loading=!0;var i=new FormData;i.append("file",t.fileList[0].raw);var r={headers:{"Content-Type":"multipart/form-data",token:localStorage.getItem("token")}};t.$axios.post(t.globalurl+"/upload/img",i,r).then((function(e){t.allsubmit(e.data.data.url)}))}}))},allsubmit:function(e){var t=this,i={type:5,classify3Id:this.pid,cardId:this.id,article:{cardId:this.id,title:this.ruleFormc.name,imgs:e}};this.$axios.post(this.globalurl+"/article/publish",i,{headers:{token:localStorage.getItem("token")}}).then((function(e){t.$router.go(0)}))},handleExceed:function(e,t){this.$message.warning("当前限制选择 4 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},remove:function(e,t){this.fileList=t},changeFile:function(e,t){var i="image/jpeg"===e.raw.type||"image/png"===e.raw.type,r=e.raw.size/1024/1024<2;i||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),i&&r?this.fileList.push(e):t.pop()}}}),o=a,s=(i("4ba7"),i("2877")),n=Object(s["a"])(o,r,l,!1,null,"d63bb188",null);t["a"]=n.exports},a434:function(e,t,i){"use strict";var r=i("23e7"),l=i("23cb"),a=i("a691"),o=i("50c4"),s=i("7b0b"),n=i("65f0"),u=i("8418"),c=i("1dde"),m=i("ae40"),d=c("splice"),p=m("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,h=Math.min,g=9007199254740991,b="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d||!p},{splice:function(e,t){var i,r,c,m,d,p,F=s(this),v=o(F.length),y=l(e,v),x=arguments.length;if(0===x?i=r=0:1===x?(i=0,r=v-y):(i=x-2,r=h(f(a(t),0),v-y)),v+i-r>g)throw TypeError(b);for(c=n(F,r),m=0;m<r;m++)d=y+m,d in F&&u(c,m,F[d]);if(c.length=r,i<r){for(m=y;m<v-r;m++)d=m+r,p=m+i,d in F?F[p]=F[d]:delete F[p];for(m=v;m>v-r+i;m--)delete F[m-1]}else if(i>r)for(m=v-r;m>y;m--)d=m+r-1,p=m+i-1,d in F?F[p]=F[d]:delete F[p];for(m=0;m<i;m++)F[m+y]=arguments[m+2];return F.length=v-r+i,c}})},aef9:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"model_chanping"},[i("el-dialog",{attrs:{title:"添加ID",visible:e.dialogVisiblee,width:"900px","before-close":e.closeModel},on:{"update:visible":function(t){e.dialogVisiblee=t}}},[i("el-form",{ref:"ruleForme",staticClass:"demo-ruleForm",attrs:{model:e.ruleForme,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"关联ID",prop:"region",rules:{required:!0,message:"请选择",trigger:"blur"}}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForme.region,callback:function(t){e.$set(e.ruleForme,"region",t)},expression:"ruleForme.region"}},e._l(e.List,(function(e,t){return i("el-option",{key:t,attrs:{label:e.cardName,value:e.id}})})),1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.closeModel}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForme("ruleForme")}}},[e._v("确 定")])],1)],1)],1)},l=[],a={props:["dialogVisiblee","pid"],data:function(){return{ruleForme:{region:""},id:"",fileList:[],List:[]}},created:function(){var e=this;this.id=this.$route.query.id,axios("/card/simple/list","get").then((function(t){e.List=t}))},methods:{closeModel:function(){this.$emit("update:dialogVisiblee",!1)},submitForme:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var i={classify3Id:t.pid,cardId:t.id,toCardId:t.ruleForme.region};axios("/card/union","post",i).then((function(e){t.$router.go(0)}))}}))}}},o=a,s=(i("0061"),i("2877")),n=Object(s["a"])(o,r,l,!1,null,"4ab793a1",null);t["a"]=n.exports},b9b3:function(e,t,i){"use strict";var r=i("19a7"),l=i.n(r);l.a},bad2:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"model_chanping"},[i("el-dialog",{attrs:{title:"添加外链",visible:e.dialogVisibled,width:"900px","before-close":e.closeModel},on:{"update:visible":function(t){e.dialogVisibled=t}}},[i("el-form",{ref:"ruleFormd",staticClass:"demo-ruleForm",attrs:{model:e.ruleFormd,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"名称",prop:"name",rules:{required:!0,message:"请输入名称",trigger:"blur"}}},[i("el-input",{model:{value:e.ruleFormd.name,callback:function(t){e.$set(e.ruleFormd,"name",t)},expression:"ruleFormd.name"}})],1),i("el-form-item",{attrs:{label:"地址",prop:"name",rules:{required:!0,message:"请输入地址",trigger:"blur"}}},[i("el-input",{model:{value:e.ruleFormd.desc,callback:function(t){e.$set(e.ruleFormd,"desc",t)},expression:"ruleFormd.desc"}})],1),i("el-form-item",{attrs:{label:"来源",prop:"name",rules:{required:!0,message:"请输入来源",trigger:"blur"}}},[i("el-input",{model:{value:e.ruleFormd.edit,callback:function(t){e.$set(e.ruleFormd,"edit",t)},expression:"ruleFormd.edit"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.closeModel}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitFormd("ruleFormd")}}},[e._v("确 定")])],1)],1)],1)},l=[],a=(i("b0c0"),{props:["dialogVisibled","pid"],data:function(){return{ruleFormd:{name:"",desc:"",edit:""},id:"",fileList:[]}},created:function(){this.id=this.$route.query.id},methods:{closeModel:function(){this.$emit("update:dialogVisibled",!1)},submitFormd:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var i={type:7,classify3Id:t.pid,cardId:t.id,article:{cardId:t.id,title:t.ruleFormd.name,content:t.ruleFormd.desc,description:t.ruleFormd.edit}};t.$axios.post(t.globalurl+"/article/publish",i,{headers:{token:localStorage.getItem("token")}}).then((function(e){t.$router.go(0)}))}}))}}}),o=a,s=(i("f6b2"),i("2877")),n=Object(s["a"])(o,r,l,!1,null,"4899dc91",null);t["a"]=n.exports},c5a9:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"model_chanping"},[i("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"发表文章",visible:e.dialogVisibleb,width:"900px","before-close":e.closeModel},on:{"update:visible":function(t){e.dialogVisibleb=t}}},[i("el-form",{ref:"ruleFormb",staticClass:"demo-ruleForm",attrs:{model:e.ruleFormb,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"缩略图"}},[i("el-upload",{ref:"uploada",attrs:{"list-type":"picture-card",action:"",limit:1,"file-list":e.fileList,"auto-upload":!1,"on-change":e.changeFile,"on-remove":e.remove}},[i("i",{staticClass:"el-icon-plus"})])],1),i("el-form-item",{attrs:{label:"文章标题",prop:"name",rules:{required:!0,message:"请输入文章标题",trigger:"blur"}}},[i("el-input",{model:{value:e.ruleFormb.name,callback:function(t){e.$set(e.ruleFormb,"name",t)},expression:"ruleFormb.name"}})],1),i("el-form-item",{attrs:{label:"文章简介",prop:"desc",rules:{required:!0,message:"请输入简介",trigger:"blur"}}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.ruleFormb.desc,callback:function(t){e.$set(e.ruleFormb,"desc",t)},expression:"ruleFormb.desc"}})],1),i("el-form-item",{staticClass:"edity",attrs:{label:"文章内容",prop:"edit",rules:{required:!0,message:"请输入文章内容",trigger:"blur"}}},[i("quill-editor",{ref:"myTextEditor",staticStyle:{height:"300px"},model:{value:e.ruleFormb.edit,callback:function(t){e.$set(e.ruleFormb,"edit",t)},expression:"ruleFormb.edit"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.closeModel}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitFormb("ruleFormb")}}},[e._v("确 定")])],1)],1)],1)},l=[],a=(i("b0c0"),i("a753"),i("8096"),i("14e1"),i("953d")),o={props:["dialogVisibleb","pid"],components:{quillEditor:a["quillEditor"]},data:function(){return{ruleFormb:{name:"",desc:"",edit:""},id:"",fileList:[],loading:!1}},created:function(){this.id=this.$route.query.id},methods:{closeModel:function(){this.$emit("update:dialogVisibleb",!1)},submitFormb:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.loading=!0;var i=new FormData;i.append("file",t.fileList[0].raw);var r={headers:{"Content-Type":"multipart/form-data",token:localStorage.getItem("token")}};t.$axios.post(t.globalurl+"/upload/img",i,r).then((function(e){t.allsubmit(e.data.data.url)}))}}))},allsubmit:function(e){var t=this,i={type:1,classify3Id:this.pid,cardId:this.id,article:{cardId:this.id,title:this.ruleFormb.name,description:this.ruleFormb.desc,imgs:e,content:this.ruleFormb.edit}};this.$axios.post(this.globalurl+"/article/publish",i,{headers:{token:localStorage.getItem("token")}}).then((function(e){t.$router.go(0)}))},remove:function(e,t){this.fileList=t},changeFile:function(e,t){var i="image/jpeg"===e.raw.type||"image/png"===e.raw.type,r=e.raw.size/1024/1024<2;i||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),i&&r?this.fileList.push(e):t.pop()}}},s=o,n=(i("21cd"),i("2877")),u=Object(n["a"])(s,r,l,!1,null,"6b5bcb61",null);t["a"]=u.exports},d40f:function(e,t,i){"use strict";var r=i("143f"),l=i.n(r);l.a},d599:function(e,t,i){},d6fe:function(e,t,i){},e060:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"model_chanping"},[i("el-dialog",{attrs:{title:"添加视频",visible:e.dialogVisibleg,width:"900px","before-close":e.closeModel},on:{"update:visible":function(t){e.dialogVisibleg=t}}},[i("el-form",{ref:"ruleFormg",staticClass:"demo-ruleForm",attrs:{model:e.ruleFormg,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"视频缩略图"}},[i("el-upload",{ref:"uploada",attrs:{"list-type":"picture-card",action:"",limit:1,"file-list":e.fileList,"auto-upload":!1,"on-change":e.changeFile,"on-remove":e.remove}},[i("i",{staticClass:"el-icon-plus"})])],1),i("el-form-item",{attrs:{label:"视频名称",prop:"name",rules:{required:!0,message:"请输入视频名称",trigger:"blur"}}},[i("el-input",{model:{value:e.ruleFormg.name,callback:function(t){e.$set(e.ruleFormg,"name",t)},expression:"ruleFormg.name"}})],1),i("el-form-item",{attrs:{label:"选择文件"}},[i("el-upload",{ref:"uploadgtop",staticClass:"upload-demo",attrs:{action:"",limit:1,"file-list":e.fileLista,"auto-upload":!1,accept:".mp4","on-change":e.changeFilea,"on-remove":e.removea}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传MP4文件，且不超过10MB")])],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.closeModel}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.submitFormg("ruleFormg")}}},[e._v("确 定")])],1)],1)],1)},l=[],a=(i("c975"),i("a434"),i("b0c0"),{props:["dialogVisibleg","pid"],data:function(){return{ruleFormg:{name:""},id:"",fileList:[],fileLista:[],loading:!1}},created:function(){this.id=this.$route.query.id},methods:{closeModel:function(){this.$emit("update:dialogVisibleg",!1)},submitFormg:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.loading=!0;var i=new FormData;i.append("file",t.fileList[0].raw);var r={headers:{"Content-Type":"multipart/form-data",token:localStorage.getItem("token")}};t.$axios.post(t.globalurl+"/upload/img",i,r).then((function(e){var i=new FormData;i.append("file",t.fileLista[0].raw),t.$axios.post(t.globalurl+"/upload/video",i,r).then((function(i){t.allsubmit(e.data.data.url,i.data.data.url)}))}))}}))},allsubmit:function(e,t){var i=this,r={type:6,classify3Id:this.pid,cardId:this.id,article:{cardId:this.id,title:this.ruleFormg.name,imgs:e,video:t}};this.$axios.post(this.globalurl+"/article/publish",r,{headers:{token:localStorage.getItem("token")}}).then((function(e){i.$router.go(0)}))},remove:function(e,t){this.fileList=t},changeFile:function(e,t){var i="image/jpeg"===e.raw.type||"image/png"===e.raw.type,r=e.raw.size/1024/1024<2;i||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),i&&r?this.fileList.push(e):t.pop()},removea:function(e,t){this.fileLista=t},changeFilea:function(e,t){this.fileLista.push(e)},addDomain:function(){this.ruleForma.domains.length<6&&this.ruleForma.domains.push({value:"",key:Date.now()})},removeDomain:function(e){var t=this.ruleForma.domains.indexOf(e);-1!==t&&this.ruleForma.domains.splice(t,1)}}}),o=a,s=(i("75a9"),i("2877")),n=Object(s["a"])(o,r,l,!1,null,"103cb59b",null);t["a"]=n.exports},e0f7:function(e,t,i){"use strict";var r=i("f68c"),l=i.n(r);l.a},e566:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"model_chanping"},[i("el-dialog",{attrs:{title:"添加电影",visible:e.dialogVisibleh,width:"900px","before-close":e.closeModel},on:{"update:visible":function(t){e.dialogVisibleh=t}}},[i("el-form",{ref:"ruleFormh",staticClass:"demo-ruleForm",attrs:{model:e.ruleFormh,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"电影图片"}},[i("el-upload",{ref:"uploada",attrs:{"list-type":"picture-card",action:"",limit:4,"file-list":e.fileList,"auto-upload":!1,"on-exceed":e.handleExceed,"on-change":e.changeFile,"on-remove":e.remove}},[i("i",{staticClass:"el-icon-plus"})]),i("p",{staticClass:"el-upload__tip"},[e._v("最多可上传1张，只能上传jpg/png文件，且每张不超过2MB")])],1),i("el-form-item",{attrs:{label:"电影名称",prop:"name",rules:{required:!0,message:"请输入电影名称",trigger:"blur"}}},[i("el-input",{model:{value:e.ruleFormh.name,callback:function(t){e.$set(e.ruleFormh,"name",t)},expression:"ruleFormh.name"}})],1),i("el-form-item",{attrs:{label:"导演",prop:"athor",rules:{required:!0,message:"请输入导演",trigger:"blur"}}},[i("el-input",{model:{value:e.ruleFormh.athor,callback:function(t){e.$set(e.ruleFormh,"athor",t)},expression:"ruleFormh.athor"}})],1),i("el-form-item",{attrs:{label:"编剧",prop:"chu",rules:{required:!0,message:"请输入编剧",trigger:"blur"}}},[i("el-input",{model:{value:e.ruleFormh.chu,callback:function(t){e.$set(e.ruleFormh,"chu",t)},expression:"ruleFormh.chu"}})],1),i("el-form-item",{attrs:{label:"主演",prop:"fu",rules:{required:!0,message:"请输入主演",trigger:"blur"}}},[i("el-input",{model:{value:e.ruleFormh.fu,callback:function(t){e.$set(e.ruleFormh,"fu",t)},expression:"ruleFormh.fu"}})],1),i("el-form-item",{attrs:{label:"类型",prop:"yi",rules:{required:!0,message:"请输入类型",trigger:"blur"}}},[i("el-input",{model:{value:e.ruleFormh.yi,callback:function(t){e.$set(e.ruleFormh,"yi",t)},expression:"ruleFormh.yi"}})],1),i("el-form-item",{attrs:{label:"上映时间",prop:"nian",rules:{required:!0,message:"请输入上映时间",trigger:"blur"}}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.ruleFormh.nian,callback:function(t){e.$set(e.ruleFormh,"nian",t)},expression:"ruleFormh.nian"}})],1),i("el-form-item",{attrs:{label:"地区",prop:"ding",rules:{required:!0,message:"请输入地区",trigger:"blur"}}},[i("el-input",{model:{value:e.ruleFormh.ding,callback:function(t){e.$set(e.ruleFormh,"ding",t)},expression:"ruleFormh.ding"}})],1),i("el-form-item",{attrs:{label:"语言",prop:"isbn",rules:{required:!0,message:"请输入语言",trigger:"blur"}}},[i("el-input",{model:{value:e.ruleFormh.isbn,callback:function(t){e.$set(e.ruleFormh,"isbn",t)},expression:"ruleFormh.isbn"}})],1),i("el-form-item",{attrs:{label:"片长",prop:"dou",rules:{required:!0,message:"请输入片长",trigger:"blur"}}},[i("el-input",{attrs:{type:"number"},model:{value:e.ruleFormh.dou,callback:function(t){e.$set(e.ruleFormh,"dou",t)},expression:"ruleFormh.dou"}})],1),e._l(e.ruleFormh.domains,(function(t,r){return i("el-form-item",{key:r,attrs:{label:"观看网站"+(r+1),prop:"domains."+r+".inputala",rules:{required:!0,message:"请输入观看网站",trigger:"blur"}}},[i("div",{staticClass:"flex delete"},[i("el-input",{staticClass:"top",attrs:{placeholder:"请输入名称"},model:{value:t.inputala,callback:function(i){e.$set(t,"inputala",i)},expression:"domain.inputala"}}),i("span",{staticClass:"heng"},[e._v("—")]),i("el-input",{staticClass:"bot",attrs:{placeholder:"请输入观看网站"},model:{value:t.inputara,callback:function(i){e.$set(t,"inputara",i)},expression:"domain.inputara"}},[i("i",{staticClass:"el-input__icon el-icon-paperclip",attrs:{slot:"prefix"},slot:"prefix"})]),i("el-button",{attrs:{type:"danger"},on:{click:function(i){return i.preventDefault(),e.removeDomainh(t)}}},[e._v("删除")])],1)])})),i("el-button",{staticClass:"addplay",attrs:{type:"primary",plain:"",icon:"el-icon-circle-plus-outline"},on:{click:e.addDomainh}},[e._v("点击添加购买地址，最多可添加6个")])],2),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.closeModel}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.submitFormh("ruleFormh")}}},[e._v("确 定")])],1)],1)],1)},l=[],a=(i("99af"),i("c975"),i("a434"),i("b0c0"),{props:["dialogVisibleh","pid"],data:function(){return{ruleFormh:{name:"",athor:"",chu:"",fu:"",yi:"",nian:"",ding:"",isbn:"",dou:"",domains:[{inputala:"",inputara:""}]},id:"",fileList:[],loading:!1}},created:function(){this.id=this.$route.query.id},methods:{closeModel:function(){this.$emit("update:dialogVisibleh",!1)},submitFormh:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.loading=!0;var i=new FormData;i.append("file",t.fileList[0].raw);var r={headers:{"Content-Type":"multipart/form-data",token:localStorage.getItem("token")}};t.$axios.post(t.globalurl+"/upload/img",i,r).then((function(e){t.allsubmit(e.data.data.url)}))}}))},allsubmit:function(e){var t=this;console.log(this.ruleFormh);var i=new Date(this.ruleFormh.nian),r={type:4,classify3Id:this.pid,cardId:this.id,article:{cardId:this.id,title:this.ruleFormh.name,director:this.ruleFormh.athor,writers:this.ruleFormh.chu,starring:this.ruleFormh.fu,mvType:this.ruleFormh.yi,releaseDate:i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate(),press:this.ruleFormh.ding,language:this.ruleFormh.isbn,mvTime:this.ruleFormh.dou,imgs:e,links:JSON.stringify(this.ruleFormh.domains)}};this.$axios.post(this.globalurl+"/article/publish",r,{headers:{token:localStorage.getItem("token")}}).then((function(e){t.$router.go(0)}))},handleExceed:function(e,t){this.$message.warning("当前限制选择 4 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},remove:function(e,t){this.fileList=t},changeFile:function(e,t){var i="image/jpeg"===e.raw.type||"image/png"===e.raw.type,r=e.raw.size/1024/1024<2;i||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),i&&r?this.fileList.push(e):t.pop()},addDomainh:function(){this.ruleFormh.domains.length<6&&this.ruleFormh.domains.push({value:"",key:Date.now()})},removeDomainh:function(e){var t=this.ruleFormh.domains.indexOf(e);-1!==t&&this.ruleFormh.domains.splice(t,1)}}}),o=a,s=(i("d40f"),i("2877")),n=Object(s["a"])(o,r,l,!1,null,"23190538",null);t["a"]=n.exports},f68c:function(e,t,i){},f6b2:function(e,t,i){"use strict";var r=i("d599"),l=i.n(r);l.a}}]);
//# sourceMappingURL=chunk-1c6b5366.964cab42.js.map